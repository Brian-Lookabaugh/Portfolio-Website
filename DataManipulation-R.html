<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.120">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brian Lookabaugh">

<title>Guide to Data Manipulation in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="DataManipulation-R_files/libs/clipboard/clipboard.min.js"></script>
<script src="DataManipulation-R_files/libs/quarto-html/quarto.js"></script>
<script src="DataManipulation-R_files/libs/quarto-html/popper.min.js"></script>
<script src="DataManipulation-R_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="DataManipulation-R_files/libs/quarto-html/anchor.min.js"></script>
<link href="DataManipulation-R_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="DataManipulation-R_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="DataManipulation-R_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="DataManipulation-R_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="DataManipulation-R_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#importing-and-merging-data" id="toc-importing-and-merging-data" class="nav-link active" data-scroll-target="#importing-and-merging-data"><span class="toc-section-number">1</span>  Importing and Merging Data</a></li>
  <li><a href="#keepingdropping-information" id="toc-keepingdropping-information" class="nav-link" data-scroll-target="#keepingdropping-information"><span class="toc-section-number">2</span>  Keeping/Dropping Information</a>
  <ul class="collapse">
  <li><a href="#keepingdropping-columns" id="toc-keepingdropping-columns" class="nav-link" data-scroll-target="#keepingdropping-columns"><span class="toc-section-number">2.1</span>  Keeping/Dropping Columns</a></li>
  <li><a href="#keepingdropping-rows" id="toc-keepingdropping-rows" class="nav-link" data-scroll-target="#keepingdropping-rows"><span class="toc-section-number">2.2</span>  Keeping/Dropping Rows</a></li>
  <li><a href="#duplicate-values" id="toc-duplicate-values" class="nav-link" data-scroll-target="#duplicate-values"><span class="toc-section-number">2.3</span>  Duplicate Values</a></li>
  </ul></li>
  <li><a href="#renaming-data" id="toc-renaming-data" class="nav-link" data-scroll-target="#renaming-data"><span class="toc-section-number">3</span>  Renaming Data</a></li>
  <li><a href="#creating-new-variables" id="toc-creating-new-variables" class="nav-link" data-scroll-target="#creating-new-variables"><span class="toc-section-number">4</span>  Creating New Variables</a>
  <ul class="collapse">
  <li><a href="#creating-dummy-variables" id="toc-creating-dummy-variables" class="nav-link" data-scroll-target="#creating-dummy-variables"><span class="toc-section-number">4.1</span>  Creating Dummy Variables</a></li>
  <li><a href="#creating-ordinal-variables" id="toc-creating-ordinal-variables" class="nav-link" data-scroll-target="#creating-ordinal-variables"><span class="toc-section-number">4.2</span>  Creating Ordinal Variables</a></li>
  <li><a href="#creating-categorical-variables" id="toc-creating-categorical-variables" class="nav-link" data-scroll-target="#creating-categorical-variables"><span class="toc-section-number">4.3</span>  Creating Categorical Variables</a></li>
  <li><a href="#creating-log-transformed-variables" id="toc-creating-log-transformed-variables" class="nav-link" data-scroll-target="#creating-log-transformed-variables"><span class="toc-section-number">4.4</span>  Creating Log-Transformed Variables</a></li>
  <li><a href="#creating-lagged-and-lead-variables" id="toc-creating-lagged-and-lead-variables" class="nav-link" data-scroll-target="#creating-lagged-and-lead-variables"><span class="toc-section-number">4.5</span>  Creating Lagged and Lead Variables</a></li>
  </ul></li>
  <li><a href="#creating-count-variables" id="toc-creating-count-variables" class="nav-link" data-scroll-target="#creating-count-variables"><span class="toc-section-number">5</span>  Creating Count Variables</a></li>
  <li><a href="#sorting-and-ordering-data" id="toc-sorting-and-ordering-data" class="nav-link" data-scroll-target="#sorting-and-ordering-data"><span class="toc-section-number">6</span>  Sorting and Ordering Data</a>
  <ul class="collapse">
  <li><a href="#arranging-columns" id="toc-arranging-columns" class="nav-link" data-scroll-target="#arranging-columns"><span class="toc-section-number">6.1</span>  Arranging Columns</a></li>
  <li><a href="#arranging-rows" id="toc-arranging-rows" class="nav-link" data-scroll-target="#arranging-rows"><span class="toc-section-number">6.2</span>  Arranging Rows</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Guide to Data Manipulation in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Brian Lookabaugh </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<p>My first experience with statistical programming began with a tool known as Stata. While this program is relatively popular in areas such as political science and economics, it is not widely used in most other contexts. However, I was always fond of Stata due to its incredibly simple syntax. If I wanted to keep a variable, I would simply <code>keep var</code>. If I wanted to drop a variable, I would <code>drop var</code>. It was really that simple. Coming from that background, transitioning to R was a bit intimidating at first. And because I remember how that transition went, I have created this document to detail basic, but crucial, data manipulation tasks in R for those currently in transition to R. In addition, I also plan to use this document <em>regularly</em> for those days when I’m unable to remember the exact syntax that I need for a given task.</p>
<p>First, we’re going to load the required packages for this document:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl) <span class="co"># Importing Excel Documents</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readxl' was built under R version 4.2.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># Easy Data Manipulation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As a quick side note, while this is not necessary in this example given that we are only loading two packages, in a true data science project, you will be loading numerous packages. Rather than typing <code>library(X)</code> for every individual package, you can use the following format, which does the same thing as the code above:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"readxl"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dplyr"</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="importing-and-merging-data" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="importing-and-merging-data"><span class="header-section-number">1</span> Importing and Merging Data</h2>
<p>Now, we are going to import data from an Excel spreadsheet into RStudio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>VDEM_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"C:/Users/brian/Desktop/Dissertation &amp; Projects/Data/VDEM Example Data.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This snippet of the very large and comprehensive Varieties of Democracy (V-Dem) data set includes information on civil society strength, GDP per capita, oil and natural gas income, and regime types of over 100 countries ranging from the late 1700s to the present. However, say that we also want information on international trade in our final data set. This information was not included in the initial data set. Luckily, we do have access to this information in another Excel spreadsheet. However, if we want information from both of these data sets together, we will need to merge the two data sets. We can do this with the following code. First, we need to load the trade data itself:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>trade_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"C:/Users/brian/Desktop/Grad School/Data2/Data/Raw Spreadsheet Data/COW_Trade.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we’ll need to actually <em>merge</em> these data sets. While we can do this with base R syntax, we are going to use the dplyr method instead, which uses SQL syntax to join data sets together. For the purposes of this example, we are going to be using an INNER JOIN function. What this means is that the final data set will only include rows that matched for both data sets. If you find yourself in a situation where you need less restrictive criteria, you can explore LEFT JOINs, RIGHT JOINs and OUTER JOINs. OUTER JOINs are the exact opposite of INNER JOINs in that they include all information from both data sets, regardless of whether the two data sets had values that did not match. LEFT JOINs include <em>all</em> information from the left (or first specified) data set but only include information from the right (or second) data set that matches with the left data set. As you can infer, a RIGHT JOIN does the exact opposite. For out data to merge, we also need to specify the value that we are merging them by. Essentially, this is the value that we are telling R is common across both data sets. This can be practically anything ranging from countries to US states to individuals, etc. For our purposes, we are going to use the “ccode” variable, a numeric code for countries, and the year variable to fulfill this role:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(VDEM_data, trade_data,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ccode"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So, what did we actually do here? For one, we now have a data set that has all of the information from both the VDEM and the Trade data sets together into one composite data set. However, by stipulating an INNER JOIN, this data set only includes observations with countries that were in <em>both</em> the VDEM and Trade data set. If we had specified an OUTER JOIN function, then we would have information on <em>all</em> countries from both data sets, regardless of whether they were included in only one of the data sets. If we had specified a LEFT JOIN, we would have information on all of the countries in the VDEM data set, regardless of whether these countries were present in the Trade data set. However, if we had unique countries in the Trade data set that were not present in the VDEM data set, these would have been dropped. You can reverse these last 2 sentences to figure out what a RIGHT JOIN would have given you. We have a merged data set now and that is great. However, is was really convenient that our cross-sectional ID variable that we were merging on happened to be named the exact same thing in both data sets. Oftentimes, this won’t be true. How do we merge data sets if this is the case? To get started, let’s rename this country code variable in one of the data sets:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>trade_data <span class="ot">&lt;-</span> trade_data <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">country_code =</span> ccode)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Okay, now let’s see how we would merge these data sets together with different names for the same value that we are going to merge on:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(VDEM_data, trade_data,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ccode"</span> <span class="ot">=</span> <span class="st">"country_code"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There we go! Now we know how to merge data sets where the ID variable that is being merged on has different names.</p>
</section>
<section id="keepingdropping-information" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="keepingdropping-information"><span class="header-section-number">2</span> Keeping/Dropping Information</h2>
<p>When acquiring a data set, we are often given additional data that is not necessarily needed. Below, syntax is provided for keeping/dropping columns (variables), keeping/dropping rows (observations) and dealing with duplicate values.</p>
<section id="keepingdropping-columns" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="keepingdropping-columns"><span class="header-section-number">2.1</span> Keeping/Dropping Columns</h3>
<p>Keeping columns is useful when we do not need the majority of columns in our data set. In contrast, you may want to drop columns if you need most of the columns in the data set, but just need to select out a couple/few columns. The first chunk of code is creating a new data set that is keeping only the country code, year, GDP per capita, and imports columns. The second chunk of code is deleting the alternative “country_id” and country name columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>keep_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(ccode, year, e_gdppc, imports))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>drop_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(country_id, country))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="keepingdropping-rows" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="keepingdropping-rows"><span class="header-section-number">2.2</span> Keeping/Dropping Rows</h3>
<p>This code works well for keeping/dropping columns. However, how would we do something similar for filtering rows? We can use the <code>filter</code> command to meet these goals. Below, we are creating a new data set that <em>only</em> includes wealthier (e_gdppc &gt;= 10) democracies (v2x_regime &gt; 1):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>rich_democs <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(v2x_regime <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> e_gdppc <span class="sc">&gt;=</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We could also reverse this and create a data set of comparatively non-wealthy autocracies:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>poor_autocs <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(v2x_regime <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&amp;</span> e_gdppc <span class="sc">&lt;</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also use an “or” condition. Perhaps we want a data set that includes democracies and/or countries with a large amount of petroleum production:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>democ_or_oil <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(v2x_regime <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">|</span> e_total_resources_income_pc <span class="sc">&gt;=</span> <span class="dv">350</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="duplicate-values" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="duplicate-values"><span class="header-section-number">2.3</span> Duplicate Values</h3>
<p>Oftentimes, especially when merging data, we end up with duplicate values. For example, in a data set such as this, we might find that we have two unique rows for “Suriname 2007” or “Australia 1994”. Duplicates are a common problem, but there is an easy way to deal with them. The following line of code tells us how many duplicates are present within our data set:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">duplicated</span>(merged_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>It turns out that we do not have any duplicates in this data set. However, if we did, how would we go about dropping these duplicates? In the following line of code, we are going to remove rows where the country code-year pairing is the exact same across 2 or more rows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(ccode, year, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="renaming-data" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="renaming-data"><span class="header-section-number">3</span> Renaming Data</h2>
<p>Here, we are going to simply rename a column. Note that we have already documented this syntax earlier when we renamed “ccode” to “country_code” but we are going to go through another simple example where we rename two variables in a single line of code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">regime_type =</span> v2x_regime, <span class="at">gdp_pc =</span> e_gdppc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-new-variables" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="creating-new-variables"><span class="header-section-number">4</span> Creating New Variables</h2>
<p>In my opinion, creating new variables represents the “meat” of data manipulation. In my personal research, this is the part of the data manipulation process that I end up having the most lines of code dedicated to. Below, we will provide numerous lines of code to demonstrate how to create a variety of new variables.</p>
<section id="creating-dummy-variables" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="creating-dummy-variables"><span class="header-section-number">4.1</span> Creating Dummy Variables</h3>
<p>Here, we are going to create a dummy variable for whether a country is a democracy:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">democracy =</span> <span class="fu">case_when</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    regime_type <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    regime_type <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternatively, we can also use the <code>if_else</code> command to do the same thing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">democracy2 =</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">if_else</span>(regime_type <span class="sc">&gt;</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In fact, the <code>if_else</code> command is useful for all sorts of “True or False” statements that we may want to apply to a newly generated variable. For example, maybe we would like a dummy variable that takes a value of “1” if a country has the highest civil society score in a given year. We can do this with the following code. Note that it is best practice to <code>ungroup()</code> after using <code>group_by</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">biggest_CSO =</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">if_else</span>(v2xcs_ccsi <span class="sc">==</span> <span class="fu">max</span>(v2xcs_ccsi), <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternatively, if we modify the <code>group_by</code> command to grouping by country instead of year, we can get a variable that lets us know the year(s) with the highest civil society score for each individual country:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ccode) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">biggest_CSO2 =</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">if_else</span>(v2xcs_ccsi <span class="sc">==</span> <span class="fu">max</span>(v2xcs_ccsi), <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-ordinal-variables" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="creating-ordinal-variables"><span class="header-section-number">4.2</span> Creating Ordinal Variables</h3>
<p>Here, we are going to create an ordinal, three-unit (0-2) variable for civil society strength:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ordered_CSO =</span> <span class="fu">case_when</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    v2xcs_ccsi <span class="sc">&lt;</span> .<span class="dv">33</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    v2xcs_ccsi <span class="sc">&gt;=</span> .<span class="dv">33</span> <span class="sc">&amp;</span> v2xcs_ccsi <span class="sc">&lt;</span> .<span class="dv">66</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    v2xcs_ccsi <span class="sc">&gt;=</span> .<span class="dv">66</span> <span class="sc">~</span> <span class="dv">2</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-categorical-variables" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="creating-categorical-variables"><span class="header-section-number">4.3</span> Creating Categorical Variables</h3>
<p>Now, we are going to create categorical variables that serve as a numeric value to reflect a country’s region. However, these numbers are not ordinal (a value of “2” (South America) is not greater than a value of “1” (North America) since this makes no sense). So, we will need to convert this variable to a factor variable so that R does not treat them as such and instead, recognizes that these numbers are simply symbols of which region a country belongs to:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">factor</span>(<span class="fu">case_when</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    ccode <span class="sc">&lt;</span> <span class="dv">100</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="do">## North America </span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    ccode <span class="sc">&gt;=</span> <span class="dv">100</span> <span class="sc">&amp;</span> ccode <span class="sc">&lt;</span> <span class="dv">200</span> <span class="sc">~</span> <span class="dv">2</span>, <span class="do">## South America</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    ccode <span class="sc">&gt;=</span> <span class="dv">200</span> <span class="sc">&amp;</span> ccode <span class="sc">&lt;</span> <span class="dv">400</span> <span class="sc">~</span> <span class="dv">3</span>, <span class="do">## Europe</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    ccode <span class="sc">&gt;=</span> <span class="dv">400</span> <span class="sc">&amp;</span> ccode <span class="sc">&lt;</span> <span class="dv">600</span> <span class="sc">~</span> <span class="dv">4</span>, <span class="do">## Sub-Saharan Africa</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    ccode <span class="sc">&gt;=</span> <span class="dv">600</span> <span class="sc">&amp;</span> ccode <span class="sc">&lt;</span> <span class="dv">700</span> <span class="sc">~</span> <span class="dv">5</span>, <span class="do">## Middle East and North Africa</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    ccode <span class="sc">&gt;=</span> <span class="dv">700</span> <span class="sc">&amp;</span> ccode <span class="sc">&lt;</span> <span class="dv">900</span> <span class="sc">~</span> <span class="dv">6</span>, <span class="do">## Asia</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    ccode <span class="sc">&gt;=</span> <span class="dv">900</span> <span class="sc">~</span> <span class="dv">7</span> <span class="do">## Oceania</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  )))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-log-transformed-variables" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="creating-log-transformed-variables"><span class="header-section-number">4.4</span> Creating Log-Transformed Variables</h3>
<p>Oftentimes, the distribution of a variable is highly right-skewed, clearly departing from a normal distribution that we naturally assume most of our variables have. In the social sciences, the most infamous right-skewed variable is GDP per capita. Typical treatment of this variable includes a log-transformation of the variable so that it can be appropriately used in statistical models. Still, GDP per capita is not the <em>only</em> variable that is treated this way. Because of this, it is good to know how to log-transform a variable in R. I am also going to add +1 to each value prior to the log-transformation. While this variable in particular does not need this, I have personally come across many right-skewed variables that had values of 0. Adding +1 to the column is not perfect, however, it does make a log-transformation of initially “0” values nonsensical since a log-transformation of “1” is simply “0”. The consequences of not treating your “0” observations while instituting a log-transformation manifest as post-log-transformation values that do not make any sense:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">lGDPpc =</span> <span class="fu">log</span>(gdp_pc <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-lagged-and-lead-variables" class="level3" data-number="4.5">
<h3 data-number="4.5" class="anchored" data-anchor-id="creating-lagged-and-lead-variables"><span class="header-section-number">4.5</span> Creating Lagged and Lead Variables</h3>
<p>In some cases, when preparing our data for statistical modeling, we may have theoretical reasons to believe that the relationship between our dependent variable and independent variable(s) is not instantaneous. In some cases, we may expect that our dependent variable in the present can be explained by things that happened in the past (this is a lagged effect). In other words, we also might say that the effect of our independent variables will not be present until sometime in the future. For example, we might have a reason to believe that the effect of a new community healthcare program will take time to impact community health. This would be an example of a lagged effect. We also might have reasons to believe that our dependent variable in the future is reactive to our independent variables in the present (lead effect). For example, if we are trying to explain what motivates U.S. foreign aid, we have to understand that U.S. foreign aid allocation is reactive to events that have happened in the past. Below, code is presented that demonstrates how one can generate a lagged and lead variable by one time period. If one wishes to modify the size of the lagged/lead effect, one simply changes <code>n = 1</code> to <code>n = 3</code>, <code>n = 5</code>, etc. Note that we are grouping by country so that the lagged and lead effects are generated <em>within</em> countries. Otherwise, countries may be accidentally receiving the lagged/lead values of <em>other</em> countries:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ccode) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lag_democ =</span> <span class="fu">lag</span>(democracy, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">order_by =</span> ccode)) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ccode) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lead_democ =</span> <span class="fu">lead</span>(democracy, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">order_by =</span> ccode)) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="creating-count-variables" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="creating-count-variables"><span class="header-section-number">5</span> Creating Count Variables</h2>
<p>Depending on what our project is, we may want a variable that serves as a count of some sort. For example, maybe we would like a count of the years that a country has been in this data set. To do this, we can execute the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ccode) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_count =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternatively, we may want this variable to simply serve as a summary as the total years a country spent in my data set:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ccode) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_years =</span> <span class="fu">max</span>(year_count)) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sorting-and-ordering-data" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="sorting-and-ordering-data"><span class="header-section-number">6</span> Sorting and Ordering Data</h2>
<p>An important aspect of data management is keeping a data set clean and orderly. The following code below will demonstrate how to arrange columns and rows in pursuit of this data management ideal.</p>
<section id="arranging-columns" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="arranging-columns"><span class="header-section-number">6.1</span> Arranging Columns</h3>
<p>Here, we are re-arranging the columns in the data set so that the “country” variable shows up first at the far-left-hand side, “ccode” is after that, “year” is after that, etc. However, after exports, we are specifying <code>everything())</code> so that we are not dropping columns that we did not have a specified order for.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, ccode, year, democracy, imports, exports, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="arranging-rows" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="arranging-rows"><span class="header-section-number">6.2</span> Arranging Rows</h3>
<p>Here, we are specifying that we would like for our data to be sorted by country and by year. Because we are using “ccode” as our country identifier and due to the fact that, unless specified otherwise, arrange will sort in ascending order, the first observations listed in this newly formatted data set is the United States (with the smallest ccode of “2”) in the late 1800s (the earliest years that the US is recorded in this data set):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(ccode, year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>However, if we would like to sort this in descending order for countries instead, we can do so simply by:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(ccode), year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>